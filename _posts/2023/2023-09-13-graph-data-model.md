---
title: Neo4j 图数据库建模
date: 2023-09-13 14:31:57 +0800
categories: [博客]
tags: [neo4j, graph data model] 
---


## 目标

- 熟悉 Neo4j 图形数据建模生命周期，掌握设计图形数据模型（针对各个领域的各种业务问题）的基本过程。

图数据建模是用户将任意域描述为节点以及属性和标签关系的连通图的过程。 Neo4j 图数据模型旨在以 Cypher® 查询的形式回答问题，并通过组织图数据库的数据结构来解决业务和技术问题。

## 图形数据模型 = 白板友好

图形数据模型通常被称为 __白板友好__ 模型。 


> 通常，在设计数据模型时，人们在白板上绘制示例数据，并将其连接到绘制的其他数据，以显示不同项目如何连接。 然后，对白板模型重新格式化和结构化，以适应关系模型的规范化表。
图数据建模中也存在类似的过程。 但是，图形数据模型不会修改数据模型以适应规范化的表结构，而是保持与在白板上绘制时完全相同。 这就是图形数据模型因对 __白板友好__ 而得名的地方。
{: .prompt-tip }


下面通过一个例子来证明这一点。 在下面的白板绘图中，有一个关于电影 __《黑客帝国》__ 的数据集。


接下来，我们对实体进行一些形式化，并匹配关系类型的预期语法，为属性图模型创建节点/关系视图。


在下一步中，我们将添加标签并确定节点的属性以及属性图模型的关系。


最后，您可以在Neo4j浏览器中查看此数据模型，并确保它与白板上绘制的内容匹配。 另外，请注意它与我们最初设计的白板模型几乎相同。


轻松地将数据模型添加到白板上的能力使图形数据模型变得异常简单和直观。无需制定业务模型版本或向业务用户解释 ERD 术语。相反，任何人都可以理解图数据模型。

### 描述 domain
 
为了更好地理解设计图数据模型的过程，以一小组数据为例，逐步了解创建图数据模型的每个步骤。考虑以下描述我们的示例数据实体和连接的场景。
###  场景

> 莎莉（Sally）和约翰（John）两个人是朋友。约翰和莎莉都读过《图数据库》一书。
{: .prompt-info }

我们可以使用此语句中的信息通过将组件标识为标签、节点和关系来构建我们的模型。让我们将场景分成几个部分，并将它们定义为属性图模型的一部分。然而，首先我们简化模型。


你可以看到：

- 节点（圆圈）代表对象。
- 节点可以具有属性（名称/值对）。
- 关系（箭头）连接节点并表示动作。
- 关系是有方向的并且可以具有属性（名称/值对）。
### 节点
我们在域中识别的第一个实体是节点。节点是形成图的两个基本单元之一（另一个基本单元是关系）。

节点通常用于表示实体，但也可以表示其他域组件，具体取决于用例。节点可以包含保存数据名称/值对的属性。可以使用一个或多个标签为节点分配角色或类型。

> 您通常可以通过识别领域中的名词来找到图模型的节点。汽车、人、客户、公司、资产和其他类似实体可以定义为良好起点的节点。
{: .prompt-info }

我们可以将节点识别为具有唯一概念标识的实体。在我们的场景中，我们从 Sally 和 John 开始，这些实体在下面以粗体列出。

#### 定义节点

##### 场景 - 定义节点

> 约翰和莎莉两个人是朋友。约翰和莎莉都读过《图数据库》一书。
{: .prompt-info }

提取节点：

- 约翰
- 莎莉
- 图数据库
:::info
请记住，图数据库将实体的每个实例作为单独的节点（约翰和莎莉将是两个单独的节点，即使他们都是人），而图数据库将是另一本书的单独节点。
:::
### 标签
现在，当我们了解节点是什么时，我们可以决定为节点分配哪些标签（如果有）来对它们进行分组或分类。让我们回顾一下标签的定义以及它们在图数据模型中的使用方式。

标签是一个命名图结构，用于将节点分组为集合。所有标有相同标签的节点都属于同一集合。

许多数据库查询可以使用这些集合而不是整个图，从而使查询更容易编写且更高效。一个节点可以用任意数量的标签来标记，包括没有标签，使标签成为图形的可选添加。


> 与我们通过识别场景中的名词来找到图形模型的节点类似，您可以通过通用名词或人员、地点或事物组来识别标签。适合项目组的一般名词（例如车辆、人员、客户、公司、资产和类似术语）可以用作图表中的标签。
{: .prompt-info }

为了确定我们是否可以在 Sally 和 John 场景中对对象进行分组，我们首先确定语句中提到的节点（John、Sally、图形数据库）的角色。我们可以在语句中发现两种不同类型的对象，下面重点强调。


> 约翰和莎莉两个人是朋友。约翰和莎莉都读过《图数据库》一书。
{: .prompt-info }

#### 定义标签

### 关系

### 定义关系

### 属性

### 定义属性

### 实现模型 Implementing the model

### 在 Neo4j 中查看数据

### 总结

### 资源
